<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°„éµ°è‹±é›„å‚³ï¼šæ™ºé¬¥æ›¸ç”Ÿ RPG æŒ‘æˆ° (é€²éšç‰ˆ)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&display=swap');

        :root {
            --bg-color: #f4e4bc; /* å®£ç´™è‰² */
            --text-color: #2c2c2c; /* å¢¨è‰² */
            --accent-color: #8b0000; /* æœ±ç´…å°æ³¥è‰² */
            --highlight-color: #d4a017; /* é‡‘è‰² */
        }

        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #2c2c2c;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            /* ç°¡å–®çš„æ°´å¢¨è³ªæ„ŸèƒŒæ™¯åœ– */
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23444444' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }

        #game-container {
            width: 100%;
            max-width: 600px;
            background-color: var(--bg-color);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            border: 2px solid #5c4033;
            min-height: 80vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        /* å…§æ¡†è£é£¾ç·šæ¢ */
        #game-container::before {
            content: "";
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 1px solid #5c4033;
            pointer-events: none;
        }

        h1, h2 {
            text-align: center;
            color: var(--text-color);
            margin-bottom: 10px;
        }

        .screen {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 20px;
            animation: fadeIn 0.5s;
        }

        .screen.active {
            display: flex;
        }

        .story-text {
            font-size: 1.1rem;
            line-height: 1.8;
            margin-bottom: 20px;
            text-align: justify;
            background: rgba(255, 255, 255, 0.5);
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid var(--accent-color);
        }

        .poem-box {
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            color: #5c4033;
            white-space: pre-line; /* ä¿ç•™æ›è¡Œ */
        }

        .options-grid {
            display: grid;
            gap: 15px;
            width: 100%;
        }

        button {
            background-color: #fff;
            border: 2px solid var(--text-color);
            color: var(--text-color);
            padding: 15px;
            font-family: 'Noto Serif TC', serif;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            border-radius: 5px;
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            background-color: var(--text-color);
            color: var(--bg-color);
        }

        button.start-btn, button.restart-btn {
            background-color: var(--accent-color);
            color: white;
            border: none;
            text-align: center;
            font-size: 1.2rem;
            margin-top: 20px;
            width: 100%;
        }
        
        button.start-btn:hover, button.restart-btn:hover {
            background-color: #a00000;
        }

        .progress-bar {
            width: 100%;
            height: 5px;
            background: #ddd;
            margin-bottom: 20px;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-color);
            width: 0%;
            transition: width 0.3s;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
        }

        .feedback.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.fail {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .ending-img {
            font-size: 4rem;
            margin-bottom: 20px;
            text-align: center;
        }

    </style>
</head>
<body>

<div id="game-container">
    <div id="start-screen" class="screen active">
        <h1>å°„éµ°è‹±é›„å‚³<br>æ™ºé¬¥æ›¸ç”Ÿ</h1>
        <div style="text-align: center; font-size: 3rem; margin: 20px 0;">ğŸ“œ</div>
        <p class="story-text">
            é€™æ˜¯é€šå¾€ã€Œä¸€ç‡ˆå¤§å¸«ã€éš±å±…åœ°çš„æœ€å¾Œä¸€é—œã€‚<br><br>
            ä½ ç¾åœ¨åŒ–èº«ç‚º<b>é»ƒè“‰</b>ï¼Œèº«å—é‡å‚·ï¼Œå¿…é ˆé è‘—æ©Ÿæ™ºèˆ‡å£æ‰ï¼Œç ´è§£ã€Œè®€ã€ä¹‹è­·è¡›â€”â€”<b>æœ±å­æŸ³</b>çš„å±¤å±¤åˆé›£ï¼Œæ‰èƒ½è®“éƒ­é–å“¥å“¥æ¹è‘—ä½ éé—œæ•‘å‘½ã€‚<br><br>
            <b>è¦å‰‡ï¼š</b>å…±å››å€‹é—œå¡ï¼Œé¸éŒ¯ä¸€æ­¥ï¼Œå³åˆ»å¤±æ•—ã€‚
        </p>
        <button class="start-btn" onclick="startGame()">æ¥å—æŒ‘æˆ°</button>
    </div>

    <div id="game-screen" class="screen">
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>
        <h2 id="level-title">é—œå¡ 1</h2>
        <div id="story-content" class="story-text">
            </div>
        <div id="options-container" class="options-grid">
            </div>
        <div id="feedback-area"></div>
    </div>

    <div id="game-over-screen" class="screen">
        <div class="ending-img">ğŸ¥€</div>
        <h2>é—–é—œå¤±æ•—</h2>
        <p id="fail-reason" class="story-text" style="text-align: center; color: #8b0000;"></p>
        <p style="text-align: center;">æ›¸ç”Ÿæœ±å­æŸ³å†·å“¼ä¸€è²ï¼Œä¸é¡˜æ”¾è¡Œã€‚<br>éƒ­é–åªèƒ½æ¹è‘—ä½ é»¯ç„¶ä¸‹å±±...</p>
        <button class="restart-btn" onclick="location.reload()">é‡æ–°æŒ‘æˆ°</button>
    </div>

    <div id="victory-screen" class="screen">
        <div class="ending-img">ğŸ’®</div>
        <h2>é€šé—œæˆåŠŸï¼</h2>
        <p class="story-text">
            æ›¸ç”Ÿæœ±å­æŸ³è½å®Œä½ çš„ä¸‹è¯ï¼Œè‡‰è‰²å¤§è®Šï¼Œéš¨å³å¤§ç¬‘ä¸‰è²ï¼š<br>
            ã€Œä½©æœï¼ä½©æœï¼åœ¨ä¸‹ç´ç‘Ÿçµç¶å…«å¤§ç‹ï¼Œæ•—çµ¦äº†å§‘å¨˜çš„é­‘é­…é­é­å››å°é¬¼ï¼ã€<br><br>
            ä»–ç¾æ„§åœ°å´èº«è®“é–‹äº†é“è·¯ï¼Œéƒ­é–æ¹è‘—ä½ è·¨éäº†çŸ³æ©‹ï¼Œçµ‚æ–¼è¦‹åˆ°äº†èƒ½æ•‘å‘½çš„ä¸€ç‡ˆå¤§å¸«ï¼
        </p>
        <button class="restart-btn" onclick="location.reload()">å†ç©ä¸€æ¬¡</button>
    </div>
</div>

<script>
    // éŠæˆ²è³‡æ–™åº«
    const questions = [
        {
            title: "ç¬¬ä¸€é—œï¼šç‹¹è·¯ç›¸é€¢",
            content: "ã€å ´æ™¯ï¼šå±±é ‚çŸ³æ©‹ã€‘<br>ä½ æ‰¶è‘—å—å‚·çš„éƒ­é–å“¥å“¥çˆ¬ä¸Šå±±é ‚ï¼Œå”¯ä¸€çš„çŸ³æ©‹è¢«ä¸€å€‹æ›¸ç”Ÿæ“‹ä½ã€‚ä»–æ­£åœ¨è®€æ›¸ï¼Œå°ä½ å€‘è¦–è‹¥ç„¡ç¹ã€‚ç‚ºäº†æ•‘å‘½ï¼Œä½ å¿…é ˆè®“ä»–ã€Œé–‹å£ã€ã€‚<br>ä½ è©²æ€éº¼èªªï¼Ÿ",
            options: [
                { text: "å–‚ï¼é‚£å€‹è®€æ›¸äººï¼Œå¿«é»è®“è·¯ï¼äººå‘½é—œå¤©å•Šï¼", correct: false, reason: "æ›¸ç”Ÿæœ€è¨å­ç²—é­¯ä¹‹äººï¼Œä»–å¤§ç­†ä¸€æ®å°‡ä½ å€‘æƒä¸‹å±±å´–ã€‚" },
                { text: "å˜†é“ï¼šã€Œã€Šè«–èªã€‹äº‘ï¼šã€æœ‰æœ‹è‡ªé æ–¹ä¾†ï¼Œä¸äº¦æ¨‚ä¹ï¼Ÿã€é€™äººè®€è–è³¢æ›¸ï¼Œå»ä¸æ‡‚é€™é“ç†ã€‚ã€", correct: true, feedback: "æ›¸ç”Ÿé©šè¨æ–¼ä½ çš„æ–‡é‡‡ï¼Œçµ‚æ–¼æŠ¬èµ·é ­ä¾†æ­£çœ¼çœ‹ä½ å€‘ã€‚" },
                { text: "ç›´æ¥é‹ç”¨è¼•åŠŸè·³éä»–é ­é ‚ã€‚", correct: false, reason: "æ›¸ç”Ÿæ­¦åŠŸæ·±ä¸å¯æ¸¬ï¼Œä½ åœ¨åŠç©ºä¸­å°±è¢«é»ç©´å®šä½ã€‚" },
                { text: "è·ªä¸‹ä¾†æ±‚ä»–ç™¼ç™¼æ…ˆæ‚²ã€‚", correct: false, reason: "æ›¸ç”Ÿé«˜å‚²ï¼Œå°è‹¦è‚‰è¨ˆç„¡å‹•æ–¼è¡·ã€‚" }
            ]
        },
        {
            title: "ç¬¬äºŒé—œï¼šèº«ä¸–ä¹‹è¬",
            content: "ã€å ´æ™¯ï¼šè©©è©æå­—ã€‘<br>æ›¸ç”Ÿè¦‹ä½ æœ‰äº›æ–‡é‡‡ï¼Œä¾¿åŸäº†ä¸€é¦–è©©ï¼Œè¦ä½ çŒœé€™å››å€‹å­—ï¼Œèªªå‡ºä»–çš„èº«ä¸–ï¼š<br><div class='poem-box'>ã€Œå…­ç¶“è˜Šè—‰èƒ¸ä¸­ä¹…ï¼Œä¸€åŠåå¹´ç£¨åœ¨æ‰‹ï¼Œ<br>æèŠ±é ­ä¸Šä¸€ææ©«ï¼Œææ´©å¤©æ©Ÿè«éœ²å£ã€‚<br>ä¸€é»ç´¯ç´¯å¤§å¦‚æ–—ï¼Œå»æ©åŠç‰€ç„¡æ‰€æœ‰ã€‚<br>å®Œåç›´å¾…æ›å† æ­¸ï¼Œæœ¬ä¾†é¢ç›®å›çŸ¥å¦ï¼Ÿã€</div><br>ä½ éˆæ´»é‹ç”¨ã€Œæå­—ï¼ˆæ‹†å­—ï¼‰ã€æŠ€å·§ï¼Œå¾—å‡ºçš„ç­”æ¡ˆæ˜¯ï¼Ÿ",
            options: [
                { text: "è¾›æœªç‹€å…ƒ", correct: true, feedback: "æ­£ç¢ºï¼<br>ã€Œå…­ã€ã€ã€Œä¸€ã€ã€ã€Œåã€æš—ç¤ºå…­+ä¸€+å=<b>è¾›</b>ï¼›<br>ã€ŒæèŠ±ã€é ­ä¸ŠåŠ ä¸€ï¼Œã€Œè«éœ²å£ã€æ¸›å£=<b>æœª</b>ï¼›<br>åŠå€‹ã€Œç‰€ã€åŠ ä¸Šã€Œå¤§ã€=<b>ç‹€</b>ï¼›<br>ã€Œå®Œã€å»å† (å®€)=<b>å…ƒ</b>ã€‚<br>ä½ é“ç ´äº†ä»–ç•¶å¹´é«˜ä¸­ç‹€å…ƒçš„æ¦®è€€ï¼" },
                { text: "ç”²å­æ¢èŠ±", correct: false, reason: "å¹´ä»½èˆ‡åæ¬¡éƒ½çŒœéŒ¯äº†ï¼Œæ›¸ç”Ÿå†·ç¬‘ä¸€è²ã€‚" },
                { text: "ä¹™ä¸‘æ¦œçœ¼", correct: false, reason: "æ‚Ÿæ€§ä¸å¤ ï¼Œæ›¸ç”Ÿä¸é¡˜è®“è·¯ã€‚" },
                { text: "ä¸™å¯…é€²å£«", correct: false, reason: "é›–ç„¶éƒ½æ˜¯è®€æ›¸äººçš„é ­éŠœï¼Œä½†é€™ä¸æ˜¯è¬åº•ã€‚" }
            ]
        },
        {
            title: "ç¬¬ä¸‰é—œï¼šå°±åœ°å–æ",
            content: "ã€å ´æ™¯ï¼šæŒ‡ç‰©èµ·èˆˆã€‘<br>èº«åˆ†è¢«è­˜ç ´ï¼Œæ›¸ç”ŸæŒ‡è‘—è·¯æ—éš¨é¢¨æ–æ“ºçš„æ£•æ«šæ¨¹ï¼Œå‡ºäº†ä¸€é“ä¸Šè¯ï¼š<br><br><div class='poem-box'>ã€Œé¢¨æ“ºæ£•æ«šï¼Œåƒæ‰‹ä½›æ–æŠ˜ç–Šæ‰‡ã€‚ã€</div><br>ï¼ˆæš—ç¤ºï¼šæ£•æ«šè‘‰åƒåƒæ‰‹ä½›çš„æ‰‹ï¼Œä¹Ÿåƒæ‘ºç–Šæ‰‡ï¼‰ã€‚<br>ä½ çœ‹å‘æ± å¡˜ï¼Œçœ‹åˆ°äº†æ¯èçš„è·è‘‰ï¼Œéˆæ©Ÿä¸€å‹•ï¼Œå°å‡ºçš„ä¸‹è¯æ˜¯ï¼Ÿ",
            options: [
                { text: "éœœå‡‹è·è‘‰ï¼Œç¨è…³é¬¼æˆ´é€é™å·¾ã€‚", correct: true, feedback: "å¦™å“‰ï¼<br>ã€Œç¨è…³é¬¼ã€å°ã€Œåƒæ‰‹ä½›ã€ï¼Œ<br>ã€Œéœœå‡‹ã€å°ã€Œé¢¨æ“ºã€ï¼Œ<br>å°ä»—å·¥æ•´ä¸”æ„å¢ƒç›¸åˆï¼Œæ›¸ç”Ÿå¤§åƒä¸€é©šï¼" },
                { text: "é›²é£„è—å¤©ï¼Œè¬æ¢é¾èˆç¢§ç‰é­ã€‚", correct: false, reason: "æ„å¢ƒé›–å¥½ï¼Œä½†å°ä»—ä¸å¤ ç²¾æº–ï¼ˆè¬æ¢é¾å°ä¸ä¸Šåƒæ‰‹ä½›çš„å½¢è±¡ï¼‰ï¼Œæ›¸ç”Ÿæ–é ­ä¸èªã€‚" },
                { text: "é›¨æ‰“æµ®èï¼Œç™©è›¤èŸ†æƒ³åƒå¤©éµè‚‰ã€‚", correct: false, reason: "å¤ªä¿—æ°£äº†ï¼æ›¸ç”Ÿå¤§æ€’ï¼Œè¦ºå¾—ä½ æ±™è¾±æ–¯æ–‡ã€‚" },
                { text: "é€™å¤ªç°¡å–®äº†ï¼Œæˆ‘ä¸å±‘å°ã€‚", correct: false, reason: "é¿è€Œä¸ç­”å°±æ˜¯èªè¼¸ï¼Œæ›¸ç”Ÿä¸å†ç†æœƒä½ å€‘ã€‚" }
            ]
        },
        {
            title: "ç¬¬å››é—œï¼šåƒå¤çµ•å°",
            content: "ã€å ´æ™¯ï¼šæœ€å¾Œåˆé›£ã€‘<br>æ›¸ç”Ÿè‡‰è‰²å‡é‡ï¼Œæ±ºå®šæ‹¿å‡ºå£“ç®±åº•çš„çµ•æ‹›ã€‚é€™æ˜¯ä¸€å€‹æ¥µé›£çš„æ‹†å­—å°è¯ï¼Œä¸Šè¯æå¯«æ¨‚å™¨ï¼ŒåŒæ™‚åˆ©ç”¨ã€Œç‹ã€å­—é ­çš„ç‰¹è‰²ï¼š<br><br><div class='poem-box'>ã€Œç´ç‘Ÿçµç¶ï¼Œå…«å¤§ç‹ä¸€èˆ¬é ­é¢ã€‚ã€</div><br>ï¼ˆè¨»ï¼šç´ç‘Ÿçµç¶å››å€‹å­—ä¸Šé¢å…±æœ‰å…«å€‹ã€Œç‹ã€å­—ï¼‰ã€‚<br><br>ä½ éˆæ©Ÿä¸€å‹•ï¼Œæƒ³åˆ°ä¸€è·¯ä¸Šçš„ã€Œæ¼æ¨µè€•è®€ã€å››å€‹è­·è¡›è™•è™•é˜»æ””ï¼Œæ±ºå®šç”¨é€™ä¸‹è¯ä¾†åæ“Šï¼š",
            options: [
                { text: "æ±Ÿæ²³æ¹–æµ·ï¼Œå››é»æ°´æ³¢æ¿¤æ´¶æ¹§ã€‚", correct: false, reason: "é›–ç„¶éƒ½æœ‰æ°´å­—æ—ï¼Œä½†ã€Œå››é»æ°´ã€å°ä¸ä¸Šã€Œå…«å¤§ç‹ã€çš„æ°£å‹¢ï¼Œä¸”æ²’æœ‰è«·åˆºä¹‹æ„ã€‚" },
                { text: "é­‘é­…é­é­ï¼Œå››å°é¬¼å„è‡ªè‚šè…¸ã€‚", correct: true, feedback: "çµ•å¦™å¥½è¾­ï¼<br>ã€Œé­‘é­…é­é­ã€å››å­—éƒ½æœ‰ã€Œé¬¼ã€å­—é‚Šï¼Œå°æ‡‰ã€Œå››å°é¬¼ã€ï¼›<br>ã€Œå„è‡ªè‚šè…¸ã€æš—è«·ä»–å€‘å››äººå„æœ‰å¿ƒæ€é˜»æ””ã€‚<br>æ›¸ç”Ÿè¢«ç½µå¾—å•å£ç„¡è¨€ï¼Œå¾¹åº•æŠ˜æœï¼" },
                { text: "è©©è©æ­Œè³¦ï¼Œå››æ‰å­å„é¡¯ç¥é€šã€‚", correct: false, reason: "é€™æ˜¯åœ¨ç¨±è®šä»–å€‘ï¼Œä¸ç¬¦åˆé»ƒè“‰æ­¤æ™‚æƒ³ç½µäººçš„å¿ƒæƒ…ï¼Œä¸”å°ä»—ä¸å¦‚ã€Œé¬¼ã€å­—å·¥æ•´ã€‚" },
                { text: "æ±è¥¿å—åŒ—ï¼Œå››æ–¹ç¥å®ˆè­·å®¶åœ’ã€‚", correct: false, reason: "å¤ªéå¹³é‹ªç›´æ•˜ï¼Œç„¡æ³•å±•ç¾é»ƒè“‰çš„æ©Ÿé‹’ã€‚" }
            ]
        }
    ];

    let currentLevel = 0;

    function startGame() {
        document.getElementById('start-screen').classList.remove('active');
        document.getElementById('game-screen').classList.add('active');
        loadLevel(0);
    }

    function loadLevel(index) {
        currentLevel = index;
        const data = questions[index];
        
        // æ›´æ–°é€²åº¦æ¢
        const progressPercent = ((index) / questions.length) * 100;
        document.getElementById('progress').style.width = progressPercent + '%';

        // æ›´æ–°å…§å®¹
        document.getElementById('level-title').innerText = data.title;
        document.getElementById('story-content').innerHTML = data.content;
        
        // æ¸…ç©ºä¸¦å»ºç«‹é¸é …
        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = '';
        document.getElementById('feedback-area').innerHTML = ''; // æ¸…ç©ºå›é¥‹

        data.options.forEach(opt => {
            const btn = document.createElement('button');
            btn.innerHTML = opt.text; // ä½¿ç”¨ innerHTML æ”¯æ´æ ¼å¼åŒ–
            btn.onclick = () => handleAnswer(opt, btn);
            optionsContainer.appendChild(btn);
        });
    }

    function handleAnswer(option, btnElement) {
        const feedbackArea = document.getElementById('feedback-area');
        const allButtons = document.querySelectorAll('#options-container button');
        
        // é–å®šæ‰€æœ‰æŒ‰éˆ•ä¸èƒ½å†æŒ‰
        allButtons.forEach(b => b.disabled = true);

        if (option.correct) {
            // ç­”å°é‚è¼¯
            btnElement.style.backgroundColor = '#d4edda';
            btnElement.style.borderColor = '#28a745';
            feedbackArea.innerHTML = `<div class="feedback success">${option.feedback}<br><button style="margin-top:10px; width:auto; padding:5px 20px; font-size:1rem;" onclick="nextLevel()">ä¸‹ä¸€é—œ âœ</button></div>`;
        } else {
            // ç­”éŒ¯é‚è¼¯
            btnElement.style.backgroundColor = '#f8d7da';
            btnElement.style.borderColor = '#dc3545';
            setTimeout(() => {
                showGameOver(option.reason);
            }, 1000);
        }
    }

    function nextLevel() {
        if (currentLevel + 1 < questions.length) {
            loadLevel(currentLevel + 1);
        } else {
            showVictory();
        }
    }

    function showGameOver(reason) {
        document.getElementById('game-screen').classList.remove('active');
        document.getElementById('game-over-screen').classList.add('active');
        document.getElementById('fail-reason').innerText = "å¤±æ•—åŸå› ï¼š" + reason;
    }

    function showVictory() {
        document.getElementById('game-screen').classList.remove('active');
        document.getElementById('victory-screen').classList.add('active');
    }
</script>

</body>
</html>